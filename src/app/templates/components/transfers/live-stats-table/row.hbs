{{!-- FIXME: refactor by doing a partial/row that uses the row component --}}
<tr
  id="transfer-row-{{record.transferId}}"
  class="transfer-row data-row {{if (exists-in _selectedItems record) "selected-row"}} {{if (exists-in _expandedRowIndexes record.transferIndex) "expanded-row"}}"
  {{action (if (not record.isLoading)
    (if (exists-in _expandedRowIndexes record.transferIndex) "collapseRow" "expandRow")
    "collapseRow"
  ) record.transferIndex bubbles=false}}>
  {{!-- not using loading-container because we are in tr --}}
  {{#if record.isLoading}}
    {{!-- subtract hidden list index column --}}
    <td colspan={{sub processedColumns.length 1}}
      style={{if (eq index 0) (concat "padding-top: " (add (mult record.listIndex 73) 16) "px;") ""}}>
      <div class="row loadable-row xs">
        {{spin-spinner-block sizeClass="xs" class="absolute-middle-centered"}}
      </div>
    </td>
  {{else}}
    {{#each processedColumns as |column|}}
      {{#if column.isVisible}}
        <td class="{{if record.initSelect "animated very-slow notice-blink"}} {{column.className}}"
          style={{if (eq index 0) (concat "padding-top: " (add (mult record.listIndex 73) 16) "px;") ""}}>
          {{#if column.routeName}}
            {{#link-to column.routeName record.id}}
              {{#if column.propertyName}}
                {{get record column.propertyName}}
              {{else}}
                {{record.id}}
              {{/if}}
            {{/link-to}}
          {{else}}
            {{#if column.template}}
              {{partial column.template}}
            {{else}}
              {{#if column.component}}
                {{component column.component data=data record=record column=column table=this}}
              {{else}}
                {{get record column.propertyName}}
              {{/if}}
            {{/if}}
          {{/if}}
        </td>
      {{/if}}
    {{/each}}
  {{/if}}
</tr>
{{#if (exists-in _expandedRowIndexes record.transferIndex)}}
  <tr class="expand-row {{concat "expand-" record.transferIndex}} {{if (exists-in _selectedItems record) "selected-expand"}}" {{action "clickOnRow" index record on="click"}}>
    <td colspan="{{visibleProcessedColumns.length}}">
      {{partial expandedRowTemplate}}
    </td>
  </tr>
{{/if}}
{{!-- invoke expand action up --}}
{{#if record.initSelect}}
  {{test-callback tagName="" callback=(action "expandRow" record.transferIndex)}}
{{/if}}

